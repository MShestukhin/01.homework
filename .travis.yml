language: cpp
compiler: gcc

os: linux
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-7

deploy:
  provider: bintray
  file: "helloworld-0.0.$TRAVIS_BUILD_NUMBER-Linux.deb"
  user: "mshestukhin"
  key: "b4f4a90c6303a3c88f3b2e31009c0ebeeb1ce8c9"
  skip_cleanup: true # to upload artifacts created during the build

before_install:
  - sudo add-apt-repository -y ppa:nschloe/boost-nightly
  - sudo apt-get update -qq

install:
  - sudo apt-get install libboost-all-dev

script:
  - export CC=gcc-7
  - export CXX=g++-7
  - cmake --version
  - cmake CMakeLists.txt
  - cmake --build .
  - cmake --build . --target test
  - cmake --build . --target package